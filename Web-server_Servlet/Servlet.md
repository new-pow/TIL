# 서블릿 Servlet

## 서블릿의 현재
- 서블릿은 현재 새로운 개발 환경에서 많이 사용되지 않는다.
- 2000년대 중반에 구축한 시스템들이 주로 사용한다.
    + Servlet과 JSP로 구축했던 시스템들
    + 최신 시스템으로 전환하는데 비용이 많이 들기 때문에 지속적으로 유지보스
    + 현재 개발자들은 유지보수에 주로 이용
- 그러나 웹 서버와 브라우저 동작 및 Spring 이해에 도움이 된다.
- 여기서 배우는 HTTP request와 HTTP response는 Spring에서도 사용한다.

## 서블릿 개요
- 서버 측에서 실행되면서 클라이언트의 요청에 따라 동적으로 서비스를 제공하는 자바 클래스 (응답 : HTML 형식)
- 자바 플랫폼에서 컴포넌트 기반의 웹 애플리케이션을 개발하는 핵심 기술(동적 웹 애플리케이션 컴포넌트)
- 컨테이너 종류에 상관없이 실행됨 (플랫폼 독립적)
- 독자적으로 실행되지 못하고 톰캣과 같은 JSP/Servlet 컨테이너에서 실행된다.
- 자바로 만들어져 자바의 특징(객체 지향)을 가짐
- 스레드 기반
- JSP 페이지처럼 화면에 내용을 표시할 목적으로 사용하는 것이 아니라 MVC 패턴에서 로직인 Model과 화면에 결과를 표시하는 View 사이에서 제어를 하는 컨트롤러로 사용됨
- java 파일이기 때문에 src/main/java 폴더에 위치한다.
    - webapp폴더(HTML문서)가 아니다.

## 서블릿 처리 순서
1. 클라이언트에서 서블릿 요청 request 들어오면
2. 서버에서 서블릿 컨테이너를 만들고 스레드 생성
    - (요청 시 마다 스레드 생성)
3. 서블릿 컨테이너는 스레드를 가동하여 서블릿 객체 생성
4. 서블릿 객체의 실행이 종료되면, 스레드 종료되고 반환
5. 서블릿 실행 결과가 웹 서버에 전송
6. 이 결과를 웹 서버가 웹 브라우저에게 전송

> 참조
> - 같은 Servlet class에 대한 요청을 처리하는 모든 thread는 같은 Servlet 객체를 공유한다.
> - 로컬 변수가 각 요청 스레드마다 각 스택영역에 저장되어 동시성 문제를 발생시키지 않는다.

<br>

## 서블릿 생명주기 life cycle
1. Servlet 객체 생성
    - 처음 1회
2. 초기화 : init() 호출
    - 처음 1회
3. 요청 작업 처리 : doGet(), doPost(), service()
    - 요청시 매번 수행
4. 자원해제 : destroy()
    - 마지막 1회

<br>

## 서블릿의 장점
- 서블릿은 최초 요청 시 객체가 만들어져 메모리에 로드되고 이후 요청 시에는 기존의 객체 재활용
    - 따라서 동작 속도가 빠름
- 신뢰성
- 확장성 : 기능 확장 용이
- 플랫폼과 서버에 독립적 (자바 기반)
    - 한 번 개발된 애플리케이션은 다양한 서버 환경에서 실행 가능
- Java에서 제공되는 다른 기술을 같이 사용 가능
    - 예 : Servlet과 JDBC 연동


---
# 참조
- mlp 수업 정리

---

# 연관글
- [Servlet 만들기](TIL/Web-server_Servlet/[servlet]Servlet-만들기.md)